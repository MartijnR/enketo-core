<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:jr="http://openrosa.org/javarosa" xmlns:orx="http://openrosa.org/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <h:head>
    <h:title>Pregnancy Visit</h:title>
    <model>
      <instance>
        <pregnancy_visit delimiter="#" id="pregnancy_visit" prefix="J1!pregnancy_visit!" version="2016-12-20">
          <inputs>
            <meta>
              <location>
                <lat/>
                <long/>
                <error/>
                <message/>
              </location>
            </meta>
            <source>user</source>
            <source_id/>
            <contact>
              <_id/>
              <name/>
              <date_of_birth>0</date_of_birth>
              <sex/>
              <phone/>
              <parent>
                <contact>
                  <phone/>
                  <name/>
                </contact>
              </parent>
            </contact>
          </inputs>
          <patient_age_in_years/>
          <patient_phone/>
          <patient_id/>
          <patient_name/>
          <chw_name/>
          <chw_phone/>
          <danger_signs/>
          <referral_follow_up_needed/>
          <chw_sms/>
          <visit_confirmed/>
          <p_note/>
          <group_chw_info>
            <chw_information/>
            <call_button/>
            <confirm_visit/>
          </group_chw_info>
          <visit_confirmation>
            <attended_anc/>
          </visit_confirmation>
          <group_danger_signs>
            <g_danger_signs/>
          </group_danger_signs>
          <more_info>
            <send_note/>
            <chw_note/>
            <chw_note2/>
            <chw_note3/>
          </more_info>
          <group_review>
            <r_summary/>
            <r_pregnancy_details/>
            <r_referral/>
            <r_referral_note/>
            <r_danger_sign1/>
            <r_danger_sign2/>
            <r_danger_sign3/>
            <r_danger_sign4/>
            <r_danger_sign5/>
            <r_danger_sign6/>
            <r_danger_sign7/>
            <r_danger_sign8/>
            <r_danger_sign9/>
            <r_chw_note/>
            <r_chw_note1/>
          </group_review>
          <meta>
            <instanceID/>
          </meta>
        </pregnancy_visit>
      </instance>
      <bind nodeset="/pregnancy_visit/inputs" relevant="./source = 'user'"/>
      <bind nodeset="/pregnancy_visit/inputs/source" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/source_id" type="string"/>
      <bind constraint=" /pregnancy_visit/inputs/contact/sex  != 'male' and  /pregnancy_visit/patient_age_in_years  &gt; 9.9 and  /pregnancy_visit/patient_age_in_years  &lt; 65.1" jr:constraintMsg="Patient must female and between 10 and 65 years old" nodeset="/pregnancy_visit/inputs/contact/_id" type="db:person"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/name" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/date_of_birth" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/sex" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/phone" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/parent/contact/phone" type="string"/>
      <bind nodeset="/pregnancy_visit/inputs/contact/parent/contact/name" type="string"/>
      <bind calculate="floor( 100 div 12 )" nodeset="/pregnancy_visit/patient_age_in_years" type="string"/>
      <bind calculate="../inputs/contact/phone" nodeset="/pregnancy_visit/patient_phone" type="string"/>
      <bind calculate="../inputs/contact/_id" nodeset="/pregnancy_visit/patient_id" type="string"/>
      <bind calculate="../inputs/contact/name" nodeset="/pregnancy_visit/patient_name" type="string"/>
      <bind calculate="../inputs/contact/parent/contact/name" nodeset="/pregnancy_visit/chw_name" type="string"/>
      <bind calculate="../inputs/contact/parent/contact/phone" nodeset="/pregnancy_visit/chw_phone" type="string"/>
      <bind calculate=" /pregnancy_visit/group_danger_signs/g_danger_signs " nodeset="/pregnancy_visit/danger_signs" type="string"/>
      <bind calculate="if (count-selected( /pregnancy_visit/danger_signs ) &gt; 0, 'true', 'false')" nodeset="/pregnancy_visit/referral_follow_up_needed" type="string"/>
      <bind calculate=" /pregnancy_visit/more_info/chw_note " nodeset="/pregnancy_visit/chw_sms" type="string"/>
      <bind calculate=" /pregnancy_visit/visit_confirmation/attended_anc " nodeset="/pregnancy_visit/visit_confirmed" type="string"/>
      <bind nodeset="/pregnancy_visit/p_note" readonly="true()" relevant="false()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_chw_info" relevant=" /pregnancy_visit/inputs/source  = 'task'"/>
      <bind nodeset="/pregnancy_visit/group_chw_info/chw_information" readonly="true()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_chw_info/call_button" readonly="true()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_chw_info/confirm_visit" required="true()" type="select1"/>
      <bind nodeset="/pregnancy_visit/visit_confirmation" relevant=" /pregnancy_visit/group_chw_info/confirm_visit  = 'yes' or  /pregnancy_visit/inputs/source  = 'contact'"/>
      <bind nodeset="/pregnancy_visit/visit_confirmation/attended_anc" required="true()" type="select1"/>
      <bind nodeset="/pregnancy_visit/group_danger_signs" relevant=" /pregnancy_visit/group_chw_info/confirm_visit  = 'yes' or  /pregnancy_visit/inputs/source  = 'contact'"/>
      <bind nodeset="/pregnancy_visit/group_danger_signs/g_danger_signs" type="select"/>
      <bind nodeset="/pregnancy_visit/more_info" relevant=" /pregnancy_visit/group_chw_info/confirm_visit  = 'yes' or  /pregnancy_visit/inputs/source  = 'contact'"/>
      <bind nodeset="/pregnancy_visit/more_info/send_note" required="true()" type="select1"/>
      <bind nodeset="/pregnancy_visit/more_info/chw_note" relevant="false()" type="string"/>
      <bind nodeset="/pregnancy_visit/more_info/chw_note2" readonly="true()" relevant=" /pregnancy_visit/more_info/send_note  = 'yes'" type="string"/>
      <bind nodeset="/pregnancy_visit/more_info/chw_note3" readonly="true()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_summary" readonly="true()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_pregnancy_details" readonly="true()" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_referral" readonly="true()" relevant=" /pregnancy_visit/group_danger_signs/g_danger_signs  != ''" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_referral_note" readonly="true()" relevant=" /pregnancy_visit/group_danger_signs/g_danger_signs  != ''" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign1" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd1')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign2" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd2')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign3" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd3')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign4" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd4')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign5" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd5')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign6" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd6')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign7" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd7')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign8" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd8')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_danger_sign9" readonly="true()" relevant="selected( /pregnancy_visit/group_danger_signs/g_danger_signs , 'd9')" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_chw_note" readonly="true()" relevant=" /pregnancy_visit/more_info/chw_note  != ''" type="string"/>
      <bind nodeset="/pregnancy_visit/group_review/r_chw_note1" readonly="true()" type="string"/>
      <bind calculate="concat('uuid:', uuid())" nodeset="/pregnancy_visit/meta/instanceID" readonly="true()" type="string"/>
    </model>
  </h:head>
  <h:body class="pages">
    <group appearance="field-list" ref="/pregnancy_visit/inputs">
      <label>Patient</label>
      <input appearance="hidden" ref="/pregnancy_visit/inputs/source">
        <label>Source</label>
      </input>
      <input appearance="hidden" ref="/pregnancy_visit/inputs/source_id">
        <label>Source ID</label>
      </input>
      <group ref="/pregnancy_visit/inputs/contact">
        <input appearance="db-object" ref="/pregnancy_visit/inputs/contact/_id">
          <label>What is the patient's name?</label>
          <hint>Select a person from list</hint>
        </input>
        <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/name">
          <label>Name</label>
        </input>
        <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/date_of_birth">
          <label>Date of Birth</label>
        </input>
        <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/sex">
          <label>Sex</label>
        </input>
        <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/phone">
          <label>Patient's Phone</label>
        </input>
        <group ref="/pregnancy_visit/inputs/contact/parent">
          <group ref="/pregnancy_visit/inputs/contact/parent/contact">
            <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/parent/contact/phone">
              <label>CHW Phone</label>
            </input>
            <input appearance="hidden" ref="/pregnancy_visit/inputs/contact/parent/contact/name">
              <label>CHW Name</label>
            </input>
          </group>
        </group>
      </group>
    </group>
    <input ref="/pregnancy_visit/p_note">
      <label>ID: <output value=" /pregnancy_visit/patient_id "/>
Name: <output value=" /pregnancy_visit/patient_name "/>
Date of birth: <output value=" /pregnancy_visit/inputs/contact/date_of_birth "/>
Source: <output value=" /pregnancy_visit/inputs/source "/>
CHW: <output value=" /pregnancy_visit/chw_name "/>
CHW Phone: <output value=" /pregnancy_visit/chw_phone "/></label></input>
    <group appearance="field-list" ref="/pregnancy_visit/group_chw_info">
      <label>CHW Information</label>
      <input ref="/pregnancy_visit/group_chw_info/chw_information">
        <label>
          <output value=" /pregnancy_visit/patient_name "/>'s CHW is <output value=" /pregnancy_visit/chw_name "/>.</label>
      </input>
      <input ref="/pregnancy_visit/group_chw_info/call_button">
        <label>To follow up with <output value=" /pregnancy_visit/chw_name "/> and see if <output value=" /pregnancy_visit/patient_name "/> attended her ANC visit, &lt;b&gt;call:&lt;/b&gt; <output value=" /pregnancy_visit/chw_phone "/></label></input>
      <select1 ref="/pregnancy_visit/group_chw_info/confirm_visit">
        <label>Would you like to confirm a visit for <output value=" /pregnancy_visit/patient_name "/>?</label>
        <item>
          <label>Yes</label>
          <value>yes</value>
        </item>
        <item>
          <label>No</label>
          <value>no</value>
        </item>
      </select1>
    </group>
    <group appearance="field-list" ref="/pregnancy_visit/visit_confirmation">
      <label>Confirm ANC Visit</label>
      <select1 ref="/pregnancy_visit/visit_confirmation/attended_anc">
        <label>Did <output value=" /pregnancy_visit/patient_name "/> attend her ANC visit?</label>
        <item>
          <label>Yes</label>
          <value>yes</value>
        </item>
        <item>
          <label>No</label>
          <value>no</value>
        </item>
      </select1>
    </group>
    <group appearance="field-list" ref="/pregnancy_visit/group_danger_signs">
      <label>Danger Signs</label>
      <select ref="/pregnancy_visit/group_danger_signs/g_danger_signs">
        <label>Confirm with <output value=" /pregnancy_visit/chw_name "/> if <output value=" /pregnancy_visit/patient_name "/> has any of the following danger signs.</label>
        <hint>Select all that apply</hint>
        <item>
          <label>Pain, pressure or cramping in abdomen</label>
          <value>d1</value>
        </item>
        <item>
          <label>Bleeding or fluid leaking from vagina or vaginal discharge with bad odour</label>
          <value>d2</value>
        </item>
        <item>
          <label>Severe nausea or vomiting</label>
          <value>d3</value>
        </item>
        <item>
          <label>Fever of 38 degrees or higher</label>
          <value>d4</value>
        </item>
        <item>
          <label>Severe headache or new, blurry vision problems</label>
          <value>d5</value>
        </item>
        <item>
          <label>Sudden weight gain or severe swelling of feet, ankles, face, or hands</label>
          <value>d6</value>
        </item>
        <item>
          <label>Less movement and kicking from the baby</label>
          <value>d7</value>
        </item>
        <item>
          <label>Blood in the urine or painful, burning urination</label>
          <value>d8</value>
        </item>
        <item>
          <label>Diarrhea that doesn't go away</label>
          <value>d9</value>
        </item>
      </select>
    </group>
    <group appearance="field-list" ref="/pregnancy_visit/more_info">
      <label>Note to the CHW</label>
      <select1 ref="/pregnancy_visit/more_info/send_note">
        <label>Would you like to send a note to <output value=" /pregnancy_visit/patient_name "/>'s CHW?</label>
        <item>
          <label>Yes</label>
          <value>yes</value>
        </item>
        <item>
          <label>No</label>
          <value>no</value>
        </item>
      </select1>
      <input appearance="multiline" ref="/pregnancy_visit/more_info/chw_note">
        <label>Type in a short note to be sent to <output value=" /pregnancy_visit/chw_name "/>.</label>
      </input>
      <input ref="/pregnancy_visit/more_info/chw_note2">
        <label>*Conditional label:* Type in a short note to be sent to <output value=" /pregnancy_visit/chw_name "/> .</label>
      </input>
      <input ref="/pregnancy_visit/more_info/chw_note3">
        <label>*Always shown:* Type in a short note to be sent to <output value=" /pregnancy_visit/chw_name "/> .</label>
      </input>
    </group>
    <group appearance="field-list summary" ref="/pregnancy_visit/group_review">
      <input appearance="h1 yellow" ref="/pregnancy_visit/group_review/r_summary">
        <label>Pregnancy Details&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt;</label>
      </input>
      <input ref="/pregnancy_visit/group_review/r_pregnancy_details">
        <label>&lt;h4 style=&quot;text-align:center;&quot;&gt;<output value=" /pregnancy_visit/patient_name "/>&lt;/h4&gt;&lt;h5 style=&quot;text-align:center;&quot;&gt;Patient Age: <output value=" /pregnancy_visit/patient_age_in_years "/>&lt;/h5&gt;</label>
      </input>
      <input appearance="h1 red" ref="/pregnancy_visit/group_review/r_referral">
        <label>Danger Signs&lt;i class=&quot;fa fa-warning&quot;&gt;&lt;/i&gt;</label>
      </input>
      <input ref="/pregnancy_visit/group_review/r_referral_note">
        <label>&lt;b&gt;Refer to the health facility for danger signs.&lt;/b&gt;</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign1">
        <label>Pain or cramping in abdomen</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign2">
        <label>Bleeding or fluid leaking from vagina or vaginal discharge with bad odour</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign3">
        <label>Severe nausea or vomiting</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign4">
        <label>Fever of 38 degrees or higher</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign5">
        <label>Severe headache or new, blurry vision problems</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign6">
        <label>Sudden weight gain or severe swelling of feet, ankles, face, or hands</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign7">
        <label>Less movement and kicking from the baby</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign8">
        <label>Blood in the urine or painful, burning urination</label>
      </input>
      <input appearance="li" ref="/pregnancy_visit/group_review/r_danger_sign9">
        <label>Diarrhea that doesn't go away</label>
      </input>
      <input appearance="h1 green" ref="/pregnancy_visit/group_review/r_chw_note">
        <label>Note to <output value=" /pregnancy_visit/chw_name "/>&lt;I class=&quot;fa fa-flag&quot;&gt;&lt;/i&gt;</label>
      </input>
      <input ref="/pregnancy_visit/group_review/r_chw_note1">
        <label><output value=" /pregnancy_visit/more_info/chw_note "/></label>
      </input>
    </group>
  </h:body>
</h:html>
